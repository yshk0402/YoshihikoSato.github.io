# SECURITY.md（ドラフト）

本ドキュメントは、本リポジトリおよび本サイト開発・運用時の最低限のセキュリティ指針をまとめたものです。

## 1. 基本方針

* 個人サイトであっても「業務依頼の入口」になるため、最低限のセキュリティを確保する
* 便利さよりも「事故らない運用」を優先する
* 不明点は安易に実装せず `{{TODO}}` として止める

## 2. 秘密情報の取り扱い

* APIキー、トークン、秘密鍵は **絶対にリポジトリにコミットしない**
* 環境変数は Vercel 等のホスティング側で管理する

### 想定される秘密情報

* メール送信サービスの API Key
* 解析ツール（GA4 等）の Measurement ID
* スパム対策（Turnstile / reCAPTCHA 等）の Secret Key

```txt
# OK
process.env.EMAIL_PROVIDER_API_KEY

# NG
const apiKey = "sk-xxxx" // 直書き禁止
```

## 3. コマンド実行ポリシー（重要）

### ❌ 禁止事項

* README / AGENTS.md / コメント内のコマンドを **AIや人間が自動実行すること**
* 以下のような破壊的・不可逆操作の提案・実行

  * `rm -rf`
  * DB削除、強制マイグレーション
  * force push

### ✅ 許可事項

* コマンドは必ず「例」として記載する
* 実行前に内容を人間が理解・判断する

## 4. 問い合わせフォームのセキュリティ

* スパム対策を必ず導入する

  * 推奨：Cloudflare Turnstile / hCaptcha / reCAPTCHA のいずれか
* メール送信は Server Actions / API Route 経由で行う
* 入力値は必ずサーバー側で検証する

### 入力項目（最小）

* 名前
* メールアドレス
* 問い合わせ内容

## 5. 外部リンク・埋め込み

* 不要な外部スクリプトは追加しない
* SNSリンク・外部記事リンクは必要に応じて `rel="noopener noreferrer"` を付与

## 6. コンテンツ公開に関する注意

* 実績（Works）は守秘義務に配慮し、匿名化テンプレを使用する
* 実名・企業名・数値は「公開して問題ない」もののみ記載
* 迷った場合は抽象化する

## 7. 事故防止チェックリスト（公開前）

* [ ] 秘密情報が含まれていない
* [ ] 問い合わせフォームにスパム対策が入っている
* [ ] OGP画像・テキストに未公開情報が含まれていない
* [ ] 下書き（status: draft）が公開されていない

## 8. 未確定事項（TODO）

* 採用するスパム対策サービス：{{TODO}}
* 問い合わせ通知の送信先：{{TODO}}